<div class="card flex flex-col h-full">
  <div class="flex justify-start mb-5">
    <p-button label="Novo" icon="pi pi-plus" outlined="true" (onClick)="createTeam()" />
  </div>
  <p-table #dt
    [value]="teams.length ? teams : skeleton"
    [lazy]="true"
    (onLazyLoad)="loadTeamsLazy($event)"
    [paginator]="true"
    [alwaysShowPaginator]="false"
    [pageLinks]="3"
    [rows]="10"
    [rowsPerPageOptions]="[10, 50, 100]"
    [filterDelay]="1000"
    [rowHover]="true"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} equipes"
    paginatorDropdownAppendTo="body"
    tableStyleClass="w-full h-full"
    size="small">
    <ng-template #header>
      <tr>
        <th pSortableColumn="name">
          Nome
          <p-sortIcon field="name" />
        </th>
        <th pSortableColumn="description">
          Descrição
          <p-sortIcon field="description" />
        </th>
        <th pSortableColumn="leaderName">
          Líder
          <p-sortIcon field="leaderName" />
        </th>
        <th style="width: 10rem;">Ações</th>
      </tr>
      <tr>
        <th>
          <p-columnFilter type="text" field="name" matchMode="contains" showMenu="false" pTooltip="Pressione enter para pesquisar" tooltipEvent="focus" tooltipPosition="top"></p-columnFilter>
        </th>
        <th>
          <p-columnFilter type="text" field="description" matchMode="contains" showMenu="false" pTooltip="Pressione enter para pesquisar" tooltipEvent="focus" tooltipPosition="top"></p-columnFilter>
        </th>
        <th>
          <p-columnFilter type="text" field="leaderName" matchMode="contains" showMenu="false" pTooltip="Pressione enter para pesquisar" tooltipEvent="focus" tooltipPosition="top"></p-columnFilter>
        </th>
        <th>
        </th>
      </tr>
    </ng-template>
    <ng-template #body let-team>
      <tr *ngIf="teams.length">
        <td>{{ team.name }}</td>
        <td>{{ team.description }}</td>
        <td>{{ team.leaderName }}</td>
        <td>
          <p-button pTooltip="Gerenciar membros" tooltipPosition="top" 
            icon="pi pi-list" class="mr-2" [rounded]="true" [outlined]="true" (onClick)="listTeamMembers(team.id)" />
          <p-button pTooltip="Editar equipe" tooltipPosition="top" 
            icon="pi pi-pencil" severity="warn" class="mr-2" [rounded]="true" [outlined]="true" (onClick)="updateTeam(team)" />
          <p-button pTooltip="Excluir equipe" tooltipPosition="top"
            icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true" (onClick)="deleteTeam($event, team.id)" />
        </td>
      </tr>
      <tr *ngIf="!requestReturned && !teams.length">
        <td><p-skeleton /></td>
        <td><p-skeleton /></td>
        <td><p-skeleton /></td>
        <td><p-skeleton /></td>
      </tr>
      <tr *ngIf="requestReturned && !teams.length">
        <td colspan="4" style="text-align: center;">
          Nenhuma equipe encontrada.
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

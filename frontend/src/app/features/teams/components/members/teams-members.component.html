<div class="flex w-full flex-col gap-5 pt-5">
  <div class="flex gap-2">
    <p-floatlabel class="w-full">
      <p-multiselect fluid appendTo="body" showClear="true" [virtualScroll]="true"
        [options]="users" [(ngModel)]="usersSelected"
        optionLabel="name" optionValue="id" class="w-full" />
      <label for="email">Membros</label>
    </p-floatlabel>
    <p-button label="Adicionar" outlined="true" (onClick)="addMember()"/>
  </div>
  <div class="w-full">
    <p-table #dt
      [value]="members.length ? members : skeleton"
      [lazy]="true"
      [paginator]="true"
      [alwaysShowPaginator]="false"
      [pageLinks]="3"
      [rows]="10"
      [rowsPerPageOptions]="[10, 50, 100]"
      [filterDelay]="1000"
      [rowHover]="true"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} equipes"
      paginatorDropdownAppendTo="body"
      tableStyleClass="w-full h-full"
      size="small">
      <ng-template #header>
        <tr>
          <th>
            Nome
          </th>
          <th>
            Email
          </th>
          <th style="width: 6rem;">Ações</th>
        </tr>
      </ng-template>
      <ng-template #body let-member>
        <tr *ngIf="members.length">
          <td>{{ member.userName }}</td>
          <td>{{ member.userEmail }}</td>
          <td>
            <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true" (onClick)="removeMember($event, member.userId)" />
          </td>
        </tr>
        <tr *ngIf="!requestReturned && !members.length">
          <td><p-skeleton /></td>
          <td><p-skeleton /></td>
          <td><p-skeleton /></td>
        </tr>
        <tr *ngIf="requestReturned && !members.length">
          <td colspan="4" style="text-align: center;">
            Nenhum membro encontrado.
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="w-full flex justify-end">
    <p-button label="Salvar" (onClick)="save()"/>
  </div>
</div>